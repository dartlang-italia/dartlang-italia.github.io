<!DOCTYPE html>
<html>
<head>
    <title>Dart Developers Italia - pub, il gestore di pacchetti</title>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/feed.xml" rel="alternate" title="ATOM" type="application/atom+xml" />
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap-responsive.min.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css"> 
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31520550-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner ">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <div class="nav-collapse">
                <ul class="nav">
                    <li class="active"><a href="/">Dart Developers Italia</a></li>
                    <li><a href="/doc.html">Panoramica del linguaggio</a></li>
                    <li><a href="/articoli.html">Articoli e tutorial</a></li>
                    <li><a href="/risorse.html">Risorse esterne</a></li>
                    <li><a href="https://twitter.com/dartlang_italia"><img src="/img/twitter.png"/></a></li>
                    <li><a href="https://plus.google.com/b/102709061618541057184/102709061618541057184/posts"><img src="/img/googleplus.png"/></a></li>
                    <li><a href="https://facebook.com/DartlangItalia"><img src="/img/facebook.png"/></a></li>
                    <li><a href="https://github.com/dartlang-italia"><img src="/img/github-negate.png"/></a></li>
                    <li><a href="/feed.xml"><img src="/img/rss.png"/></a></li>
                </ul>
                <ul class="nav pull-right">
                    <li><a href="/news.html">Archivio News</a></li>
                    <!--<li><a href="/lab.html">Dart Developers Italia Lab</a></li>-->
                    <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Contatti<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="https://plus.google.com/b/102709061618541057184/102709061618541057184/posts"><i class="icon-google-plus icon-fixed-width"></i> Google+</a></li>
                            <li><a href="https://twitter.com/dartlang_italia"><i class="icon-twitter icon-fixed-width"></i> Twitter</a></li>
                            <li><a href="https://www.facebook.com/DartlangItalia"><i class="icon-facebook icon-fixed-width "></i> Facebook</a></li>
                            <li><a href="mailto:&#100;&#097;&#114;&#116;&#108;&#097;&#110;&#103;&#046;&#105;&#116;&#097;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;"><i class="icon-envelope-alt icon-fixed-width"></i> Email</a></li>
                            <li class="divider"></li>
                            <li><a href="/staff.html">Lo staff</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div id="main">
    <div class="container">
        
            <h1>pub, il gestore di pacchetti</h1>
            
                <em>articolo originale: <a href="page.urloriginale">Getting Started</a> di Dart Team</em> <br />
                <em>traduzione di <a href="https://plus.google.com/114111013415938067238/posts">Fabio Benedetti</a></em></p>
            
        
        <p><em>Pub</em> è il gestore dei pacchetti (<em>packages</em>) in Dart, ci aiuta a riutilizare il codice Dart  esistente e impacchetta le applicazioni con le relative librerie così da renderle riutilizzabili e condivisibili con altre persone. Pub si occupa della gestione delle dipendenze e delle versioni di un’applicazione in modo da poter essere certi che essa possa essere eseguita su altre macchine.</p>

<p>Per <strong>individuare</strong> un package presente su <a href="http://pub.dartlang.org">pub.dartlang.org</a>, si utilizza l’apposito Search Box in alto a
destra.</p>

<p>Per <strong>utilizzare</strong> un package che è presente su pub.dartlang.org:</p>

<ol>
  <li>
    <p>Si crea il file <code>pubspec.yaml</code> (se non esiste già) e si inserisce il package come dipendenza. Per esempio, per utilizzare il package <a href="http://pub.dartlang.org/packages/web_ui">web_ui</a> in un applicazione, <code>pubspec.yaml</code> conterrà queste istruzioni:  </p>

    <pre><code> name: my_app
 dependencies:
     web_ui: any
</code></pre>
  </li>
  <li>Si esegue <code>pub install</code> tramite linea di comando oppure attraverso il menu del  Dart Editor: Tools &gt; Pub Install.  </li>
  <li>
    <p>Si Importa una o più librerie dal package:</p>

    <pre><code> import 'package:web_ui/web_ui.dart';  
</code></pre>
  </li>
</ol>

<h2 id="installazione-e-configurazione-di-pub">Installazione e configurazione di pub</h2>

<p>Pub fa parte di <a href="http://www.dartlang.org/docs/sdk/">Dart SDK</a> (Software Development Kit), e può essere ottenuto singolarmente oppure come
parte del <a href="http://dartlang.org/editor">Dart Editor</a>. Pub può essere usato da riga di comando, <code>pub</code>, oppure può essere lanciato dall’interno
del Dart Editor.</p>

<p>Per utilizzare <code>pub</code> e altri strumenti da linea di comando, è necessario aggiungere la cartella <code>bin</code> contenuta nel SDK ai percorsi di sistema. Per esempio, su Mac e Linux:</p>

<pre><code>export PATH=$PATH:&lt;percorso/di/dart&gt;/bin
</code></pre>

<p>Per <code>&lt;percorso/di/dart&gt;/</code> si intende il percorso assoluto della cartella principale in cui risiedono le SDK. Per esempio, se installi Dart Editor in <code>/home/me/dart</code>, aggiungi questo percorso a PATH:  </p>

<pre><code>/home/me/dart/dart-sdk/bin
</code></pre>

<p>Su Windows, puoi settare la variabile d’ambiente PATH attraverso il Pannello di Controllo. Una veloce <a href="https://www.google.com/search?q=windows+set+environment+variable&amp;qscrl=1">ricerca</a> può essere utile ad individuare le istruzioni specifiche per una specifica versione di Windows.</p>

<h2 id="creare-un-package">Creare un package</h2>

<p>Per pub un package è una directory che contiene il codice Dart e il materiale necessario alla sua esecuzione, come risorse, test e documentazione. Frameworks e librerie riutilizzabili sono ovviamente packages, ma anche le applicazioni lo sono. Per far sì che un’applicazione utilizzi un package,
deve essere anch’essa definita come package.</p>

<p>Mentre tutto è un package in pub, ci sono due tipologie di packages che in pratica sono utilizzati in maniera leggermente diversa. I <a href="http://pub.dartlang.org/doc/glossary.html#library-package">library packages</a> sono dei packages scritti allo scopo di essere utilizzati da altri packages. Solitamente sono composti da codice importato da altri packages, e sono ospitati in repository ai quali altri utenti possono accedere. Un <a href="http://pub.dartlang.org/doc/glossary.html#application-package">application package</a> <em>utilizza</em> packages, ma di per se non è riutilizzato. In altre parole, i library packages sono usati come dipendenze, ma gli application packages no.</p>

<p>Nella maggior parte dei casi non ci sono differenze tra le due tipologie di package e li chiameremo semplicemente “packages”. Soltanto nei casi in cui è necessario fare distinzione, sarà specificato “application package” o “library package”.</p>

<p>Per trasformare la tua applicazione in un application package, in modo che possa utilizzare altri packages, è necessaria la presenza di un file <strong>pubspec</strong>. Questo file è scritto usando <a href="http://yaml.org/" title="YAML language">YAML language</a> ed è chiamato <code>pubspec.yaml</code>. Il più semplice pubspec.yaml possibile contiene soltanto il nome del package. Questo file deve essere salvato come <code>pubspec.yaml</code> nella directory root della tua applicazione.</p>

<p>Ecco la più semplice tipologia di file <code>pubspec.yaml</code>:  </p>

<pre><code>name: my_app 
</code></pre>

<p>Ora <code>my_app</code> è un package.</p>

<h2 id="aggiungere-una-dipendenza">Aggiungere una dipendenza</h2>

<p>Uno dei principali compiti di pub è gestire le <strong>dipendenze</strong>. Una dipendenza non è altro che un package che viene utilizzato da un’applicazione.
Se una applicazione sta utilizzando alcune librerie di trasformazione chiamate “transmogrify”, questo application package dipenderà dal package <code>transmogrify</code>.</p>

<p>Le dipendenze di un application package vanno specificate immediatamente dopo il nome del package, per esempio:</p>

<pre><code>name: my_app
dependencies:
    transmogrify
</code></pre>

<p>Attraverso questo codice, viene dichiarata la dipendenza dal pacchetto (fittizio) <code>trasmogrify</code>.</p>

<h2 id="installare-le-dipendenze">Installare le dipendenze</h2>

<p>Una volta dichiarata una dipendenza è necessario che pub la installi. Se si sta utilizzando Dart Editor, va selezionato “Pub install” dal menu “Tools”. Se si preferisce invocare pub da linea di comando, va eseguito:</p>

<pre><code>$ cd percorsp/a/my_app  
$ pub install
</code></pre>

<p>Al momento questo comando deve essere eseguito all’interno della directory contenente il file pubspec.yaml, in futuro potrà essere eseguito in qualsiasi sottodirectory del package.</p>

<p>Quando viene eseguito questo comando pub crea una directory <code>packages</code> nella cartella dove è presente il file <code>pubspec.yaml</code>. Qui saranno scaricati ed installati tutti i packages dai quali l’application package dipende (queste sono chiamate <strong>dipendenze immediate</strong>). Tutti questi packages saranno ispezionati e sarà a sua volta installato tutto ciò da cui <em>essi</em> dipendono, ricorsivamente (queste sono chiamate <strong>dipendenze transitive</strong>).</p>

<p>Quando ciò è stato fatto si avrà una directory <code>packages</code> contenente tutti i singoli package necessari all’esecuzione del programma.</p>

<h2 id="importare-codice-dalle-dipendenze">Importare codice dalle dipendenze</h2>

<p>Ora che le dipendenze sono correttamente installate, dobbiamo importarle nel nostro progetto. Per accedere ad una libreria da un altro package si usa l’istruzione <code>import</code> con lo schema <code>package:libreria/file_della_libreria.dart</code>:</p>

<pre><code>import 'package:transmogrify/transmogrify.dart';
</code></pre>

<p>Questo comando ispeziona il package <code>transmogrify</code> cercando, nella radice della directory, un file chiamato <code>transmogrify.dart</code>. La maggior parte dei package definisce un singolo entrypoint il cui nome è lo stesso del package. Si controlli la documentazione del package per verificare se nello specifico esistano differenze riguardo l’importazione del codice.</p>

<p>Conviene sempre controllare la directory <code>packages</code> (generata da pub). Se contiene errori, la directory packages potrebbe non essere aggiornata. Per risolvere questo problema bisogna eseguire <code>pub install</code> tutte le volte che si modifica il pubspec.</p>

<p>È inoltre possibile utilizzare questo stile per importare le librerie dall’interno di un pacchetto. Per esempio, se questa è la struttura del pacchetto</p>

<pre><code>transmogrify/
    lib/
        transmogrify.dart
        parser.dart
    test/
        parser/
            parser_test.dart
</code></pre>

<p>Il file <code>parser_test.dart</code> <em>potrebbe</em> importare <code>parser.dart</code> in questo modo:</p>

<pre><code>import '../../lib/parser.dart';
</code></pre>

<p>Questo schema, che utilizza percorsi relativi, è difficile da leggere; inoltre se <code>parser_test.dart</code> venisse spostato in un altra directory, questo percorso non sarebne più valido e 
si dovrebbe modificare manualmente il percorso. Utilizzando lo schema <code>package:libreria/file.dart</code>:</p>

<pre><code>import 'package:transmogrify/parser.dart';
</code></pre>

<p>In questo modo, il comando <code>import</code> potrà sempre reperire il file <code>parser.dart</code> indipendentemente da dove essp si trovi.</p>

<h2 id="aggiornare-una-dipendenza">Aggiornare una dipendenza</h2>

<p>Quando si installa per la prima volta una nuova dipendenza, <code>pub</code> scarica automaticamente l’ultima versione compatibile con gli altri packages presenti nell’applicazione. In seguito viene bloccato il package, in modo tale che venga utilizzata <em>sempre</em> quella versione, attraverso la creazione di un <strong>lockfile</strong>. Questo file è chiamato <code>pubspec.lock</code> ed è creato da <code>pub</code>. In questo file vengono esplicitate tutte le versioni di ogni dipendenza (immediata o transitiva) utilizzata dal package.</p>

<p>Se il package è di tipo application, si potrà controllare questo file direttamente all’interno del codice. In questo modo, ci si assicura per chiunque stia lavorando sull’applicazione utilizzi la stessa versione di tutti i packages. Ciò fa anche si che vemga utilizzata la stessa versione delle dipendenze quando si effettua il deploy dell’applicazione in produzione.</p>

<p>Per <strong>aggiornare</strong> le dipendenze di un’applicazione si utilizza il comando <code>update</code>:</p>

<pre><code>$ pub update
</code></pre>

<p>Questo comando fa in modo che pub rigeneri il lockfile utilizzando le ultime versione dei pacchetti da cui dipende l’applicazione.
Se si intende aggiornare soltanto una specifica dipendenza, la si può specificare in questo modo:</p>

<pre><code>$ pub update transmogrify
</code></pre>

<p>Questo comando aggiorna <code>transmogrify</code> all’ultima versione, ma lascia gli altri packages invariati.</p>

<h2 id="pubblicare-un-pacchetto">Pubblicare un pacchetto</h2>

<p>Pub non serve soltanto per importare i packages creati da altre persone. Permette anche di condividere i propri packages con il mondo. Una volta sviluppato del codice utile, se si vuole che chiunque altro possa utilizzarlo, basta eseguire questo comando:</p>

<pre><code>$ pub publish
</code></pre>

<p>Pub controlla che il nostro package sia conforme al <a href="http://pub.dartlang.org/doc/pubspec.html">formato pubspec</a> ed alle <a href="http://pub.dartlang.org/doc/package-layout.html" title="convenzioni di layout per il package">convenzioni di layout per i packages</a>, e in seguito effettua l’upload verso <a href="http://pub.dartlang.org/" title="pub.dartlang.org">pub.dartlang.org</a>. A questo punto ogni utente di Pub avrà la possibilità di scaricare o di utilizzare il package come dipendenza attraverso il proprio proprio pubspec. Per esempio, se abbiamo pubblicato la versione 1.0.0 di un package chiamato <code>transmogrify</code>, gli utenti potranno utilizzare questa dipendenza:</p>

<pre><code>dependencies:
    transmogrify: "&gt;= 1.0.0 &lt; 2.0.0"
</code></pre>

<p>Si tenga presente che i package rimangono pubblicati per sempre. Non appena si pubblica un package molto utile, gli utenti potranno utilizzarlo nelle loro dipendenze. Una volta iniziato ciò, rimuovere un package vole dire rendere inutilizzabile le loro applicazioni. Perchè non accada, pub sconsiglia fortemente la cancellazione dei packages. Si potrà sempre effettuare l’upload di una nuova versione dei packages, ma le precedenti versioni continueranno ad essere disponibili per gli utenti che non sono pronti per effettuare l’aggiornamento. </p>

    </div>
</div>
<div id="separatore_footer"></div>
<footer>
    <div class="container">
    <div class="row">
        <div class="span6">
            <p><strong>Dart Developers Italia</strong> &egrave; una community di supporto <strong>non ufficiale</strong>, in nessun modo collegata al progetto <a href="http://dartlang.org">Google Dart</a>.</p>
            <p>I contenuti del sito <a href="/">dartlang-italia.it</a> sono pubblicati dietro licenza <a href="http://creativecommons.org/licenses/by/3.0/deed.it">CC BY 3.0</a>, il codice di questo sito e gli esempi di codice Dart sono distribuiti dietro licenza <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a>.</p>
        </div>
        <div class="span6">
            <p>Questo sito &egrave; stato generato con <a href="http://jekyllrb.com">Jekyll</a> ed utilizza il framework <a href="twitter.github.com/bootstrap">Bootstrap</a>. Questo sito &egrave; <strong>open source</strong>, il codice sorgente &egrave; disponibile su <a href="https://github.com/dartlang-italia/dartlang-italia.github.io">Github</a>.</p>
            <p>Le segnalazioni su incorrettezze o bug del sito possono essere inoltrate su <a href="https://github.com/dartlang-italia/dartlang-italia.github.io/issues">GitHub Issues</a>.</p>
            <p>Vuoi diventare uno dei nostri <a href="/staff.html">collaboratori?</a> Mandaci <a href="mailto:&#100;&#097;&#114;&#116;&#108;&#097;&#110;&#103;&#046;&#105;&#116;&#097;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;">un'email</a> o contattaci attraverso i <a href="/">social network</a>.</p>
        <p>2013, <a href="http://www.claudiodangelis.com/about">Claudio d'Angelis</a>, <strong>Dartlang Italia</strong></p>
        </div>
    </div>
</div>
</footer>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="/bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
