<!DOCTYPE html>
<html>
<head>
    <title>Dartlang Italia - Panoramica del linguaggio</title>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/feed.xml" rel="alternate" title="ATOM" type="application/atom+xml" />
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap-responsive.min.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css"> 
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31520550-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner ">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <div class="nav-collapse">
                <ul class="nav">
                    <li class="active"><a href="/">Dart Developers Italia</a></li>
                    <li><a href="/doc.html">Panoramica del linguaggio</a></li>
                    <li><a href="/articoli.html">Articoli e tutorial</a></li>
                    <li><a href="/risorse.html">Risorse esterne</a></li>
                    <li><a href="https://twitter.com/dartlang_italia"><img src="/img/twitter.png"/></a></li>
                    <li><a href="https://plus.google.com/b/102709061618541057184/102709061618541057184/posts"><img src="/img/googleplus.png"/></a></li>
                    <li><a href="https://facebook.com/DartlangItalia"><img src="/img/facebook.png"/></a></li>
                    <li><a href="https://github.com/dartlang-italia"><img src="/img/github-negate.png"/></a></li>
                    <li><a href="/feed.xml"><img src="/img/rss.png"/></a></li>
                </ul>
                <ul class="nav pull-right">
                    <li><a href="/news.html">Archivio News</a></li>
                    <!--<li><a href="/lab.html">Dart Developers Italia Lab</a></li>-->
                    <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Contatti<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="https://plus.google.com/b/102709061618541057184/102709061618541057184/posts"><i class="icon-google-plus icon-fixed-width"></i> Google+</a></li>
                            <li><a href="https://twitter.com/dartlang_italia"><i class="icon-twitter icon-fixed-width"></i> Twitter</a></li>
                            <li><a href="https://www.facebook.com/DartlangItalia"><i class="icon-facebook icon-fixed-width "></i> Facebook</a></li>
                            <li><a href="mailto:&#100;&#097;&#114;&#116;&#108;&#097;&#110;&#103;&#046;&#105;&#116;&#097;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;"><i class="icon-envelope-alt icon-fixed-width"></i> Email</a></li>
                            <li class="divider"></li>
                            <li><a href="/staff.html">Lo staff</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div id="main">
    <div class="container">
        
        <h1 id="panoramica-del-linguaggio">Panoramica del linguaggio</h1>

<p><em>Traduzione parziale della sezione <a href="http://www.dartlang.org/docs/dart-up-and-running/contents/ch02.html">A Tour of the Dart Language</a> tratta dal sito ufficiale <a href="http://dartlang.org">dartlang.org</a>.</em></p>

<hr />

<h2 id="un-programma-di-base-in-dart">Un programma di base in Dart</h2>

<p>Nel seguente programma sono presenti molte delle caratteristiche di base di Dart:</p>

<pre><code>// Definizione di una funzione.
printNumber(num aNumber) {
  print('The number is $aNumber.'); // Stampa nella console
}

// Questo è il punto in cui parte l'applicazione all'avvio
main() {
  var number = 42;           // Dichiara e inizializza una variabile
  printNumber(number);       // Invoca una funzione
}
</code></pre>

<p>Gli elementi utilizzati in questo programma, comuni alla maggior parte delle
applicazioni in Dart:</p>

<p><code>// Questo è un commento</code></p>

<p><code>num</code>: un tipo di dato. Altri tipi di dato disponibili sono <em>String, int</em> e <em>bool</em>.</p>

<p><code>42</code>: un numero nella forma letterale</p>

<p><code>print()</code>: funzione built-in per stampare nella console</p>

<p><code>'...'</code> e <code>"..."</code>: una stringa in forma letterale</p>

<p><code>$variabile</code> oppure <code>${espressione}</code>: </p>

<hr />

<h2 id="commenti">Commenti</h2>

<p>Esistono tre tipi di commenti:</p>

<ol>
  <li>
    <p>Su una sola riga</p>

    <p>Il commento si apre con <strong>//</strong>. Al momento della compilazione, il contenuto del commento sarà ignorato.</p>

    <pre><code> void main(){
     // Il programma inizia qui
     print('Hello world');
 }
</code></pre>
  </li>
  <li>
    <p>Su più righe</p>

    <p>Il commento si apre con <strong>/*</strong> e si chiude con <strong>*/</strong>. Anche in questo caso il contenuto del commento sarà ignorato durante la compilazione.</p>

    <pre><code> class Punto{
     num x;
     num y;
     /*
     'x' proiezione sull'asse delle ascisse
     'y' ^^^^^ ordinate
     */
 }
</code></pre>
  </li>
  <li>
    <p>Documentazione</p>

    <p>Questo tipo di commento si apre con <strong>/**</strong> e si chiude con <strong>*/</strong>.
 A differenza degli altri tipi di commento, qui il testo viene ignorato solo se non è racchiuso fra parentesi quadre. Usando le parentesi quadre si possono incorporare collegamenti a classi, metodi e campi.</p>

    <p>I nomi fra parentesi quadre si riferiscono alla visibilità (scope) dell’elemento che si sta documentando. </p>

    <p>Di seguito un esempio di commenti di tipo “Documentazione” con riferimenti ad altre classi e argomenti</p>

    <pre><code> /**
  * Il lama (Lama glama) è un camelide addomesticato sudamericano
  */
 class Lama {
   String nome;

   /**
    * Dà da mangiare al lama [Cibo]. Una balla di fieno a settimana.
    */
   void alimenta(Cibo cibo) {
     // ...
   }

   /**
    * Esercita il tuo lama con [Attivita] per [timeLimit] minuti.
    */
   void esercitare(Attivita attivita, int timeLimit) {
     // ...
   }
 }
</code></pre>

    <p>Si usa l’utility <code>dartdoc</code>, inclusa nel SDK, per analizzare il codice Dart e generare la documentazione in HTML.</p>

    <p>Un esempio dell’output di <code>dartdoc</code>:</p>

    <pre><code> &lt;div class="doc"&gt;
     &lt;p&gt;Dà da mangiare al lama &lt;a class="crossref" href="../lama/Cibo.html"&gt;Cibo&lt;/a&gt;. Una balla di fieno a settimana.&lt;/p&gt;
     &lt;pre class="source"&gt;
         void alimenta(Cibo cibo) {
         }
     &lt;/pre&gt;
 &lt;/div&gt;
</code></pre>

    <p><code>[Cibo]</code> è stato convertito in link HTML alle API docs per la classe Cibo.</p>
  </li>
</ol>

<h2 id="variabili">Variabili</h2>

<p>Ecco un esempio su come creare una variabile e valorizzarla:</p>

<pre><code>var nome = 'Bob';
</code></pre>

<p>Le variabili sono dei puntatori. La variabile <em>nome</em> punta ad uno <em>String object</em> con valore “Bob”</p>

<h3 id="valori-predefiniti">Valori predefiniti</h3>
<p>Le variabili non inizializzate hanno <em>null</em> come valore predefinito. Questo include i numeri, anch’essi oggetti.</p>

<pre><code>int contatore;
assert(contatore == null); // Tutte le variabili sono inizialmente nulle.
</code></pre>

<h3 id="tipi-opzionali">Tipi opzionali</h3>
<p>Si possono aggiungere ad una variabile informazioni relative al tipo di dato in essa contenuto:</p>

<pre><code>String name = 'Bob';
</code></pre>

<p>Aggiungere il tipo è un modo per esprimere chiaramente il tuo intento.
Grazie alle notazioni relative al tipo di dato, il compilatore può fornire informazioni più precise 
e il Dart Editor può fornire suggerimenti più specifici.</p>

<h3 id="final">final</h3>
<p>Se la variabile non deve essere modificata, si usa <em>final</em> anzichè <em>var</em>, oppure lo si aggiunge al tipo. Se ad una variabile <em>final</em> viene assegnato un valore, questo non potrà essere cambiato.</p>

<pre><code>final name = 'Bob'; // Oppure: final String name = 'Bob';
name = 'Alice';     // ERRORE
</code></pre>

<hr />

<h2 id="tipi-di-dato">Tipi di dato</h2>

<p>In Dart abbiamo i seguenti tipi di oggetto:</p>

<ul>
  <li><em>String</em>, una stringa di testo</li>
  <li><em>num, int, double</em>, numeri</li>
  <li><em>bool</em>, valori booleani</li>
  <li><em>List</em>, liste ordinate di elementi (conosciute anche come <em>array</em>)</li>
  <li><em>Map</em>, oggetti che associano un valore ad una chiave</li>
</ul>

<p>Gli oggetti possono essere inizializzati utilizzando la notazione <em>letterale</em>, ovvero:</p>

<pre><code>String a = "Questa è una stringa";
bool check = false;
int x = 42;
</code></pre>

<p>Considerato che in Dart le variabili puntano ad un oggetto, ovvero ad una istanza di una classe,
per inizializzare una variabile si può usare un costruttore, come in questo esempio:</p>

<pre><code>Map m = new Map()
</code></pre>

<h2 id="stringhe">Stringhe</h2>

<p>Una stringa è una sequenza di caratteri Unicode racchiusa fra apici singoli o doppi:</p>

<pre><code>var s1 = 'Una prima stringa';
var s2 = "Una seconda stringa";
var s3 = 'Un\'altra stringa (occhio all\'escape)';
var s4 = "Un'altra stringa";
</code></pre>

<p>Una stringa può includere il valore di un’espressione o il valore di una variabile, la sintassi nei due casi è la seguente:</p>

<p><em>Le variabili hanno prefisso <code>$</code>, le espressioni sono contenute fra <code>${}</code></em></p>

<pre><code>var s1 = 'valore della variabile s1';
var s2 = 'Questa stringa include il $s1';
var s3 = 'QUESTA STRINGA INCLUDE IL ${s1.toUpperCase()}';
</code></pre>

<p>Per impedire che un elemento preceduto da <code>$</code> sia interpretato come variabile o espressione si può procedere in due modi:</p>

<ol>
  <li>
    <p>Escape di <code>$</code>:</p>

    <pre><code> var s1 = 'valore';
 var s2 = '\$s1';
 // il valore di s2 sarà "$s1"
</code></pre>
  </li>
  <li>
    <p>Prefisso <code>@</code>:</p>

    <pre><code> var s1 = 'valore';
 var s2 = @'$s1';
 // il valore di s2 sarà "$s1"
</code></pre>
  </li>
</ol>

<p>Due o più stringhe possono essere concatenate affiancandole:</p>

<pre><code>var s = 'La ''concatenazione '
    "non tiene conto dei ritorni a capo.";
</code></pre>

<h4 id="metodi">Metodi</h4>

<p>Gli oggetti <code>String</code> hanno metodi che possono tornare molto utili e qui ne mostriamo alcuni, come ad esempio <code>startsWidth()</code>, <code>endsWith()</code>, <code>contains()</code>: </p>

<pre><code>var s = "Cantami, o Diva, del Pelìde Achille l'ira funesta";
print(s.startsWith('Canta')) // stampa 'true'
print(s.endsWith('Achille')) // stampa 'false'
print(s.contains(new RegExp('Achille'))) // stampa 'true'
</code></pre>

<p>Il metodo <code>replaceAll()</code> sostituisce tutte le occorrenze in una data stringa:</p>

<pre><code>var templateSaluto = 'Ciao NOME!';
var saluto = templateSaluto.replaceAll(new RegExp("NOME"), 'Federica');
/*
il contenuto di 'saluto' sarà 'Ciao Federica!'.
il contenuto di 'templateSaluto' non sarà modificato.
*/
</code></pre>

<h2 id="numeri">Numeri</h2>

<p>Esistono due <code>tipi</code> di numeri in Dart:</p>

<ol>
  <li>
    <p><code>int</code> per i numeri interi </p>
  </li>
  <li>
    <p><code>double</code> per la rappresentazione a 64 bit di numeri a virgola mobile, secondo le specifiche <em>IEEE 754</em></p>
  </li>
</ol>

<p>Entrambi <code>int</code> e <code>double</code> sono sotto-interfacce di <code>num</code>. L’interfaccia <code>num</code> include i quattro operatori di base (+,-,*,/) e gli operatori bitwise tipo <em>»</em>. </p>

<pre><code>var x = 1;
var hex = 0xDEADBEEF;
var bigInt = 3465346583465243765923847659234765928347659567398475647495873984572947593470294387093493456870849216348723763945678236420938467345762304958724596873045876234572037862934765294365243652548673456705673465273465246734506873456729457623845623456234650457693475603768922346728346256;
</code></pre>

<p>Se un numero dichiarato genericamente contiene cifre decimali, sarà automaticamente considerato di tipo <code>double</code>:</p>

<pre><code>var x = 1.1;
var esponenziale = 1.42e5;
</code></pre>

<p>Le conversioni stringa/numero e viceversa funzionano così:</p>

<pre><code>import 'dart:math'; // la libreria dart:math è necessaria perché definisce i metodi che stiamo per utilizzare

// String -&gt; int
var uno = int.parse("1");
assert(uno == 1);

// String -&gt; double
var unoVirgolaUno = double.parse("1.1");
assert(unoVirgolaUno == 1.1);

// int -&gt; String
var unoComeStringa = 1.toString();
assert(unoComeStringa == "1");

// double -&gt; String
var piComeStringa = 3.14159.toStringAsFixed(2);
assert(piComeStringa == "3.14");
</code></pre>

<p>Operazioni di <em>bit shifting</em>:</p>

<pre><code>assert((3 &lt;&lt; 1) == 6);  // 0011 &lt;&lt; 1 == 0110
assert((3 &gt;&gt; 1) == 1);  // 0011 &gt;&gt; 1 == 0001
assert((3 | 4)  == 7);  // 0011 | 0100 == 0111
</code></pre>

<h2 id="boolean">Boolean</h2>

<p>A differenza di Javascript che interpreta <em>1</em> o qualsiasi oggetto non nullo come <strong>true</strong>, Dart intepreterà come <strong>false</strong> qualsiasi valore diverso da <strong>true</strong>.</p>

<pre><code>void main(){

    var x = true;
    var y = 'blabla';

    if(x){
        print('x vero');
    }
    else{
        print('x falso');
    }

    if(y){
        print('y vero'); 
    }
    else{
        print('y falso');
    }

}   
</code></pre>

<h2 id="liste-arrays">Liste (<em>Arrays</em>)</h2>

<p>Nel codice seguente viene presentata una panoramica delle operazioni più comuni relative alle liste:</p>

<pre><code>var lista = [1,2,3]; // definizione della lista

print(lista.length); // stampa la lunghezza

lista.add(4); // aggiunge un elemento alla fine della lista

print(lista[2]==3); // 'vero', perché l'elemento di indice 2 è 3

lista.removeRange(2,1); // rimuove il terzo valore, il primo argomento indica la posizione iniziale, il secondo il numero di elementi da rimuovere


print(lista[2]==3); // 'falso' perché è stato rimosso il 3, quindi il secondo valore è 4

// questo è il ciclo 'for' se si ha bisogno dell'index 
for (var x = 0; x &lt; lista.length; x++){
    print('$x: ${lista[x]}');
}

// questo è il ciclo 'for' che non tiene conto dell'index
for (final x in lista) {
  print(x);
}

/* output:
3
true
false
0: 1
1: 2
2: 4
1
2
4
*/
</code></pre>

<p>Per applicare una funzione ad ogni elemento della lista si può usare il metodo <code>forEach()</code>:</p>

<pre><code>var lista = [1,2,3];
stampaElemento(elemento) =&gt; print(elemento);  // Definisce la funzione
lista.forEach(stampaElemento);  // Chiama la funzione per ogni elemento
</code></pre>

<p>una forma <em>contratta</em> del metodo precedente:</p>

<pre><code>var lista = [1,2,3];
lista.forEach((elemento) =&gt; print(elemento));
</code></pre>

<h2 id="mappe">Mappe</h2>

<p>In Dart una mappa è un oggetto che associa determinate a chiavi a determinati valori. Ci sono due modi per definire una mappa, <em>letteralmente</em> o tramite l’interfaccia <em>Map</em>.</p>

<p>Il modo letterale:</p>

<pre><code>var dizItaEng = {
// chiave   : valore
    "gatto" : "cat";
    "cane"  : "dog";
    "mucca" : "cow";
}
</code></pre>

<p>L’interfaccia <em>Map</em>:</p>

<pre><code>var dizItaEng = new Map();
dizItaEng['gatto'] = "cat";
dizItaEng['cane'] = "dog";
dizItaEng['mucca'] = "cow";
</code></pre>

<p>Come nelle <em>liste</em>, usiamo <code>.length</code> per ottenere il numero di coppie chiave/valore.</p>

<pre><code>print(dizItaEng.length); // 3
</code></pre>

<p>Per rimuovere una coppia da una mappa usiamo il metodo <code>remove()</code>:</p>

<pre><code>dizItaEng.remove('cane');
</code></pre>

<p>Per copiare una mappa usiamo il costruttore <code>Map.from()</code></p>

<pre><code>var dizionario = new Map.from(dizItaEng);
</code></pre>

<h3 id="iterazioni">Iterazioni</h3>

<p>Si usa il metodo <code>forEach()</code> per accedere sia alle chiavi che ai valori:</p>

<pre><code>dizItaEng.forEach((k,v) =&gt; print('$k : $v'));
</code></pre>

<p>Se abbiamo bisogno solo delle chiavi o solo dei valori usiamo <code>getKeys()</code> o <code>getValues()</code>. Entrambi i metodi ritornano un oggetto di tipo <code>Collection</code>.</p>

<pre><code>var valori = dizItaEng.getValues()
var chiavi = dizItaEng.getKeys()

valori.forEach((v) =&gt; print(v))
</code></pre>

<hr />

<h2 id="funzioni">Funzioni</h2>

<p>Questo è un esempio di come si dichiara una funzione:</p>

<pre><code>void printNumero(num numero) {
    print('Il numero è $numero.');
}
</code></pre>

<p>Nonostante sia consigliabile specificare nella funzione il <em>tipo</em> dei valori che riceve in ingresso, non è obbligatorio</p>

<pre><code>printNumero(numero) {    // E' possibile ometterli
    print('Il numero è $numero.');
}
</code></pre>

<p>Per funzioni che contengono solo un comando, è possibile usare questa sintassi abbreviata:</p>

<pre><code>printNumero(numero) =&gt; print('Il numero è $numero.');
</code></pre>

<p>Questa espressione <code>=&gt; expr ;</code> è la formula abbreviata di <code>{ return expr ;}</code>. <code>Expr</code> indica la chiamata alla funzione <code>print()</code> di questa funzione.</p>

<blockquote>
  <p>Tra la freccia (<code>=&gt;</code>) e il punto e virgola (<code>;</code>) può starci uno e un solo comando. </p>
</blockquote>

<p>Una funzione può avere due tipi di parametri, obbligatori od opzionali. Sono specificati per primi quelli obbligatori, seguiti da quelli opzionali.</p>

<h2 id="parametri-opzionali">Parametri opzionali</h2>

<p>I parametri opzionali possono essere passati per nome o per posizione, ma non entrambi.</p>

<p>Entrambi i tipi di parametri opzionali possono avere i rispettivi valori di default.
I valori di default devono essere conosciuti già dal momento della compilazione. Se non sono definiti, assumeranno il valore <code>null</code>.</p>

<p>Se si vuole sapere se è stata chiamata la funzione con il parametro opzionale settato, è possibile usare la sintassi ?parametro.</p>

<pre><code>if (?device) {    // Ha valore true se è stata passata la variabile device.
    //... L'utente setta il valore. Fa qualcosa con quello...
}
</code></pre>

<h3 id="parametri-opzionali-passati-per-nome">Parametri opzionali passati per nome</h3>

<p>Quando si chiama una funzione è possibile specificare un parametro utilizzando la sintassi <code>nomeParametro: valore</code>. Ecco un esempio:</p>

<pre><code>abilitaFlags(bold: true, nascosto: false);
</code></pre>

<p>Quando si definisce una funzione, si usa la sintassi <code>{parametro1, parametro2, …}</code> per specificare i parametri passati per nome.</p>

<pre><code>// Setta i flags [bold] e [nascosto] con i valori che vuoi richiedere.
abilitaFlags({bool bold, bool nascosto}) {
    ...
}
</code></pre>

<p>Si usano i due punti (:) per specificare il valore di default.</p>

<pre><code>/**
* Setta i flags [bold] e [nascosto] con i valori che vuoi richiedere.
* definendo false come caso di default.
*/
abilitaFlags({bool bold: false, bool nascosto: false}) {
    //...
}

abilitaFlags(bold: true); //bold sarà true, nascosto false.
</code></pre>

<h3 id="parametri-opzionali-passati-per-posizione">Parametri opzionali passati per posizione</h3>

<p>Inserendo dei parametri tra <code>[  ]</code> essi vengono definiti come parametri opzionali passati per posizione.</p>

<pre><code>String messaggio(String mittente, String msg, [String device]) {
    var result = '$mittente ha detto: $msg';
    if (device != null) {
        result = '$result con un $device';
    }
    return result;
}
</code></pre>

<p>Questo è un esempio di un’invocazione alla funzione precedente senza specificare il parametro opzionale:</p>

<pre><code>assert(messaggio('Carlo', 'Ciao mondo!') == 'Carlo ha detto: Ciao mondo!');
</code></pre>

<p>Di seguito specifichiamo anche il parametro opzionale:</p>

<pre><code>assert(messaggio('Carlo', 'Ciao mondo!', 'segnale di fumo') == 'Carlo ha detto: Ciao mondo! con un segnale di fumo');
</code></pre>

<p>E’ possibile utilizzare = per definire il valore di default:</p>

<pre><code>String messaggio(String mittente, String msg, [String device='piccione viaggiatore', String umore]) {
    var result = '$mittente ha detto: $msg';
    if (device != null) {
        result = '$result con un $device';
    }
    if (umore != null) {
        result = '$result (con un $umore umore)';
    }
    return result;
}

assert(messaggio('Carlo', 'Ciao mondo!') == 'Carlo ha detto: Ciao mondo! con un piccione viaggiatore');
</code></pre>

<h2 id="funzioni-come-oggetti-first-class">Funzioni come oggetti <em>first-class</em></h2>

<p>È possibile passare una funzione come parametro di un’altra funzione. Per esempio:</p>

<pre><code>printElement(element) {
    print(element);
}

var list = [1,2,3];
list.forEach(printElement); // Passa la funzione printElement come parametro.`
</code></pre>

<p>È inoltre possibile assegnare a una variabile il contenuto di una funzione. Ad esempio:</p>

<pre><code>var capitalizza = (msg) =&gt; '!!! ${msg.toUpperCase()} !!!';
assert(capitalizza('ciao') == '!!! CIAO !!!');
</code></pre>

<h2 id="lexical-closures"><em>Lexical closures</em></h2>

<p>Le funzioni possono includere variabili definite in contesti circostanti ad esse. Nell’esempio successivo, la funzione <code>makeAdder()</code> prende la variabile <code>n</code> e la rende disponibile alla sua funzione di ritorno. </p>

<pre><code>Function makeAdder(num n) {
    return (num i) =&gt; n + i;
}

main() {
    var add2 = makeAdder(2); // Crea una funzione che ritorna (2 + i).
    var add4 = makeAdder(4); // Crea una funzione che ritorna (4 + i).
    
    assert(add2(3) == 5);
    assert(add4(3) == 7);
}
</code></pre>

<h2 id="valori-di-ritorno">Valori di ritorno</h2>

<p>Tutte le funzioni ritornano un valore. Se questo valore non è specificato, sarà implicita l’istruzione:</p>

<pre><code>return null;
</code></pre>

<p>alla fine della funzione.</p>

<hr />

<h1 id="librerie-e-visibilit">Librerie e visibilità</h1>

<p>Le direttive <code>import</code>, <code>part</code>, <code>part of</code> e <code>library</code> permettono di scrivere un codice di base modulare e riutilizzabile. Le librerie non solo rendono disponibili le API ma permettono anche di definire la visibilità del codice: gli identificatori che iniziano con un underscore (_) sono visibili solo all’interno della libreria stessa.</p>

<blockquote>
  <p>NB: Ogni applicazione Dart è una libreria, anche se non usa esplicitamente la direttiva <code>library</code>.</p>
</blockquote>

<p>Le librerie possono essere distribuite utilizzando i <code>packages</code>. Vedi : <a href="/articoli/Pub.html">pub: Il gestore dei pacchetti Dart</a>.</p>

<h3 id="usare-le-librerie">Usare le librerie</h3>

<p>Per specificare che il <em>namespace</em> di una libreria sia utilizzato all’interno di un’altra libreria è necessario usare la direttiva <code>import</code>.</p>

<p>Ad esempio, le applicazioni web in Dart utilizzano la libreria <a href="http://api.dartlang.org/html.html">dart:html</a>, che può essere importata in questo modo:</p>

<pre><code>import 'dart:html';
</code></pre>

<p>L’unico argomento richiesto per una coretta importazione è l’URI della libreria. Per le librerie di base incluse nel linguaggio, l’URI adotta lo speciale schema <code>dart:</code>. Per le altre librerie, si può utilizzare il percorso del file o lo schema <code>package:</code>. Lo schema <code>package:</code> indica che la libreria è fornita da un gestore di pacchetti come il tool <code>pub</code>. Ad esempio:</p>

<pre><code>import 'dart:io';  
import 'package:mylib/mylib.dart';  
import 'package:utils/utils.dart';  
</code></pre>

<h3 id="indicare-un-prefisso-per-una-libreria">Indicare un prefisso per una libreria</h3>
<p>Se si importano due o più librerie che hanno identificatori con nomi in comune, è possibile indicare un prefisso per una delle librerie o per tutte. Ad esempio, se <code>lib1</code> e <code>lib2</code> presentano entrambe una classe <code>Elemento</code>, è possibile evitare il conflitto, scrivendo il codice in questo modo:</p>

<pre><code>import 'package:lib1/lib1.dart';  
import 'package:lib2/lib2.dart' as lib2;  
//...  
var elemento1 = new Elemento();      // Usa Elemento da lib1.  
var elemento2 = new lib2.Elemento(); // Usa Elemento da lib2.  
</code></pre>

<h3 id="importare-una-libreria-in-modo-parziale">Importare una libreria in modo parziale</h3>

<p>Se occorre usare solo una parte di una libreria, è possibile effettuare una importazione selettiva. Esempio:</p>

<pre><code>import 'package:lib1/lib1.dart' show uno, due; // Importa solo uno e due da lib1.  
import 'package:lib2/lib2.dart' hide uno;      // Importa tutto TRANNE uno da lib2.
</code></pre>

<h3 id="implementare-le-librerie">Implementare le librerie</h3>
<p>Per specidificare i file che sono inclusi nella libreria occorre usare la direttiva <code>part</code> e la direttiva <code>library</code> per indicare che un file è dichiarato come libreria.</p>

<h4 id="usare-file-multipli">Usare file multipli</h4>
<p>Che si usi o no la direttiva <code>library</code>, è possibile usare <code>part</code> per indicare i file che implementano la libreria stessa.</p>

<pre><code>// Senza la direttiva library; questo file definisce una libreria anonima.  
part 'ball.dart';   // Parte della definizione di questa libreria è in ball.dart.  
part 'util.dart';   // Un'altra parte è in util.dart.  

import 'dart:html'; // Questa applicazione usa la libreria  HTML.  

//...  

main() {            // Utilizzando il metodo main() facciamo sì che questa sia un'applicazione (e anche una libreria).  
  //...  
}  
</code></pre>

<h4 id="dichiarazione-di-una-libreria">Dichiarazione di una libreria</h4>
<p>Per dichiarare esplicitamente una libreria, si usa la direttiva <code>library</code>. Esempio:</p>

<pre><code>library gioco;      // dichiaro che è una libreria.  

part 'ball.dart';   // Parte della definizione di questa libreria è in ball.dart.  
part 'util.dart';   // Un'altra parte è in util.dart.  

import 'dart:html'; // Questa applicazione usa la libreria  HTML.   

//...  

main() {            // Potremmo sposare questo codice in un altro file di questa libreria.  
  //...  
}
</code></pre>

<h4 id="associare-un-file-ad-una-libreria">Associare un file ad una libreria</h4>
<p>Per indicare che un file è parte di una specifica libreria si può usare <code>part</code> seguito da <code>of</code> (<code>part of</code>). L’uso di <code>part of</code> è opzionale, ma è di supporto ad alcuni strumenti, come l’editore Dart. Esempio sull’uso di <code>part</code> e <code>part of</code>:</p>

<pre><code>// In gioco.dart:  
library gioco;  
 
import 'dart:utf';  
// ... Altre importazione vanno qui ...  
  
part 'ball.dart';  
part 'util.dart';  
  
//...  
  
  
// In ball.dart:  
part of gioco;  
  
// ... il codice va qui ...  
  
  
// In util.dart:  
part of gioco;  
  
// ... il codice va qui ...  
</code></pre>

<h4 id="ri-esportare-le-librerie">Ri-esportare le librerie</h4>
<p>E’ possibile riorganizzare le librerie ri-esportandole in parte o completamente. Ad esempio, si potrebbe avere una grossa libreria che implementa una serie di librerie più piccole o creare una libreria che espone un sottoinsieme dei metodi di un’altra libreria.</p>

<pre><code>// In italian.dart:  
library italian;  
hello() =&gt; print('Buongiorno!');  
goodbye() =&gt; print('Arrivederci!');  
  
// In togo.dart:  
library togo;  
import 'italian.dart';  
export 'italian.dart' show hello;  
  
// In un altro file .dart:  
import 'togo.dart';  
  
void main() {  
    hello();   // stampa Buongiorno!  
    goodbye(); // chiamata di un metodo inesistente
}
</code></pre>

    </div>
</div>
<div id="separatore_footer"></div>
<footer>
    <div class="container">
    <div class="row">
        <div class="span6">
            <p><strong>Dart Developers Italia</strong> &egrave; una community di supporto <strong>non ufficiale</strong>, in nessun modo collegata al progetto <a href="http://dartlang.org">Google Dart</a>.</p>
            <p>I contenuti del sito <a href="/">dartlang-italia.it</a> sono pubblicati dietro licenza <a href="http://creativecommons.org/licenses/by/3.0/deed.it">CC BY 3.0</a>, il codice di questo sito e gli esempi di codice Dart sono distribuiti dietro licenza <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a>.</p>
        </div>
        <div class="span6">
            <p>Questo sito &egrave; stato generato con <a href="http://jekyllrb.com">Jekyll</a> ed utilizza il framework <a href="twitter.github.com/bootstrap">Bootstrap</a>. Questo sito &egrave; <strong>open source</strong>, il codice sorgente &egrave; disponibile su <a href="https://github.com/dartlang-italia/dartlang-italia.github.io">Github</a>.</p>
            <p>Le segnalazioni su incorrettezze o bug del sito possono essere inoltrate su <a href="https://github.com/dartlang-italia/dartlang-italia.github.io/issues">GitHub Issues</a>.</p>
            <p>Vuoi diventare uno dei nostri <a href="/staff.html">collaboratori?</a> Mandaci <a href="mailto:&#100;&#097;&#114;&#116;&#108;&#097;&#110;&#103;&#046;&#105;&#116;&#097;&#064;&#103;&#109;&#097;&#105;&#108;&#046;&#099;&#111;&#109;">un'email</a> o contattaci attraverso i <a href="/">social network</a>.</p>
        <p>2013, <a href="http://www.claudiodangelis.com/about">Claudio d'Angelis</a>, <strong>Dartlang Italia</strong></p>
        </div>
    </div>
</div>
</footer>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="/bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
